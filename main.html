<!DOCTYPE html>
<style>
    body {
        font-family: 'Open Sans', sans-serif;
    }

    #main {
        width: 960px;
    }

    .axis .domain {
        display: none;
    }
</style>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Interactive Visualization HW6</title>
    <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>

    <button onclick="switchData()">Switch Dataset</button>

</head>
<body>

<script>

var currentData = 'alan';
var currentcsv = 'https://raw.githubusercontent.com/alanjoy396/Interactive-Visualization-HW6/master/hw6_data_alan_2.csv';

function switchData() {
    if (currentData == 'alan'){
        currentData == 'katherine';
        currentcsv = 'https://raw.githubusercontent.com/alanjoy396/Interactive-Visualization-HW6/master/HW6_Data_Katherine.csv';
    }
    if (currentData == 'katherine'){
        currentData == 'alan';
        currentcsv = 'https://raw.githubusercontent.com/alanjoy396/Interactive-Visualization-HW6/master/hw6_data_alan_2.csv';
    }
}

// formatting stuff
var margin = {top: 20, right: 10, bottom: 20, left: 10};
var width = 960 - margin.left - margin.right;
var height = 500 - margin.top - margin.bottom;

var svg = d3.select('body').append('svg')
    .attr('width', width + margin.left + margin.right)
    .attr('height', height + margin.top + margin.bottom);
var g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

var x = d3.scaleBand().rangeRound([0, width]);
var y = d3.scaleLinear().rangeRound([height, 0]);
var z = d3.scaleOrdinal(d3.schemeCategory10);

var xAxis = d3.axisBottom().scale(x).tickFormat(d3.timeFormat('%b'));

var yAxis = d3.axisRight()
	.scale(y)

d3.csv(currentcsv, function(data) {
    var parse = d3.timeParse("%m/%Y");

    var keys = data.columns.slice(1);
    console.log(keys);
    z.domain(keys);

    g.append("g")
        .selectAll("g")
        .data(d3.stack().keys(keys) (data))
        .enter().append("g")
            .attr("fill", function(d) {return z(d.Course)})
        .selectAll("rect")
        .data(function(d) {return d;})
        .enter().append("rect")
            .attr("x", function(d) { return x(parse(d.data.Semester)); })
            .attr("y", function(d) { return y(d[1]); })
            .attr("height", function(d) { return y(d[0]) - y(d[1]); })
            .attr("width", x.bandwidth())});

</script>
